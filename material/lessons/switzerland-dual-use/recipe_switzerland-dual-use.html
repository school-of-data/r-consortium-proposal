<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Heidi Seibold and Peter B. Pearman" />

<meta name="date" content="2017-04-25" />

<meta name="progressive" content="false" />
<meta name="allow-skip" content="false" />

<title>Recipe for analysis of the dual-use goods exports</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-analysis-of-dual-use-goods-exports" class="section level1">
<h1><strong>Analysis of Dual-Use Goods Exports</strong></h1>
<div id="section-authors-heidi-seibold-and-peter-b.-pearman" class="section level3">
<h3>Authors: Heidi Seibold and Peter B. Pearman</h3>
</div>
<div id="section-what-are-dual-use-goods" class="section level2">
<h2>What are dual-use goods?</h2>
<p>Dual-use goods are goods that can be used for civil and military purposes. In Switzerland, these goods are controlled by special legislation, unlike in other countries where they are looked at as conventional arms exports.</p>
<p>The state secretariat for economic affairs (SECO) in Switzerland decides which dual-use goods may be exported and also <a href="https://www.seco.admin.ch/seco/de/home/Aussenwirtschaftspolitik_Wirtschaftliche_Zusammenarbeit/Wirtschaftsbeziehungen/exportkontrollen-und-sanktionen/industrieprodukte--dual-use--und-besondere-militaerische-gueter/statistik/2015.html">provides the data</a> on a quarterly basis.</p>
<p>The <a href="srf.ch/data">SRF data</a> team - the data journalism team of Swiss Radio and TV - has been repeatedly analysing these data in the past years.</p>
<p>The reasons for using R for this task are various:</p>
<ul>
<li>R can read in Excel data (SECO provides the data in .xlsx format).</li>
<li>R allows for automation of data cleaning and analyses that have to be repeated</li>
<li>R can export data to .csv so it can be used in other programs (e.g. Excel).</li>
<li>R produces good graphics and allows for individualised graphical themes.</li>
<li>Reproducible documents (e.g. HTML or PDF) can be created with R, while changes and updates can be included without major effort.</li>
<li>R allows you to document how you have transformed the data, allowing accountablility and providing readers with tranparency.</li>
<li>With R, reproducible documents (e.g. HTML or PDF) can be created, changes are included without major efforts.</li>
</ul>
<p>You can find the entire analysis on the <a href="https://github.com/srfdata/2017-01-dual-use">SRF data GitHub repository</a> and the article from January 2017 on the <a href="http://www.srf.ch/news/schweiz/schweiz-bewilligt-millionendeal-mit-dem-irak">SRF website</a>.</p>
<p>So let’s jump right into the School of Data analysis pipeline! As a reminder, you can find it <a href="https://schoolofdata.org/methodology/">here</a>.</p>
</div>
<div id="section-define" class="section level2">
<h2>Define</h2>
<p>At the beginning of 2017 SRF data analyst Timo Grossenbacher wanted to answer the question<br />
<strong>Which dual-use goods were exported to which countries in each quarter of the years 2012 to 2016?</strong></p>
<p>Having cleaned and visualised the data he realised that suddenly in 2016 Switzerland started exporting dual-use goods to Irak after not having done so in the years prior. This became the story in the January 2017 <a href="http://www.srf.ch/news/schweiz/schweiz-bewilligt-millionendeal-mit-dem-irak">article</a> .</p>
<p>We want to answer the same question and in order to have a clean project, please create a new folder on your computer in which you will store all the details of this project. We propose the following:</p>
<ul>
<li>Create a folder called <code>switzerland-dual-use</code></li>
<li>Within this folder create two additional folders called <code>data_raw</code> and <code>data_clean</code></li>
</ul>
<pre><code>└── switzerland-dual-use
    ├── data_clean
    └── data_raw</code></pre>
</div>
<div id="section-find" class="section level2">
<h2>Find</h2>
<p>The data can be found (in German) on the <a href="https://www.seco.admin.ch/seco/de/home/Aussenwirtschaftspolitik_Wirtschaftliche_Zusammenarbeit/Wirtschaftsbeziehungen/exportkontrollen-und-sanktionen/industrieprodukte--dual-use--und-besondere-militaerische-gueter/statistik/2015.html">SECO website</a>. SRF also keeps the data available in their <a href="https://github.com/srfdata/2017-01-dual-use/tree/master/analysis/input">GitHub repo</a>.</p>
</div>
<div id="section-get" class="section level2">
<h2>Get</h2>
<p>The data can be downloaded by clicking on the data links on the <a href="https://www.seco.admin.ch/seco/de/home/Aussenwirtschaftspolitik_Wirtschaftliche_Zusammenarbeit/Wirtschaftsbeziehungen/exportkontrollen-und-sanktionen/industrieprodukte--dual-use--und-besondere-militaerische-gueter/statistik/2015.html">SECO website</a>. Get the data files and store them in the folder <code>data_raw</code>.</p>
<p>Your file structure should now look like this,</p>
<pre><code>└── switzerland-dual-use
    ├── data_clean
    └── data_raw
        ├── 1_Quartal_2016_Bewilligungen.xlsx
        ├── 2. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx
        ├── 3. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx
        ├── 4. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx
        ├── Stat_IP_2015_Bewilligungen.xlsx
        ├── Statistik Dual-Use 2014 Elic.xlsx
        ├── Statistik Dual-Use Jan. 2012 - Sep. 2014 Tracker.xlsx
        └── Statistik ML 2005-2013.xlsx</code></pre>
<p>i.e. you should have the dual-use Excel files corresponding to years 2012 to 2016.</p>
<p>Let’s try reading in the data of first two quarters of 2016:</p>
<ol style="list-style-type: decimal">
<li>Open your R editor (e.g. RStudio)</li>
<li>Set your working directory to the <code>switzerland-dual-use</code> directory. To do this first enter</li>
</ol>
<pre class="r"><code>getwd()</code></pre>
<p>in the console. This will show your current working directory. E.g. for me it shows <code>[1] &quot;/home/heidi/Documents&quot;</code>. Next use <code>setwd()</code> to change to the correct diretory. For me it is <code>/home/heidi/Documents/switzerland-dual-use</code> and so I have to type</p>
<pre class="r"><code>setwd(&quot;switzerland-dual-use&quot;)</code></pre>
<p>or equivalently</p>
<pre class="r"><code>setwd(&quot;/home/heidi/Documents/switzerland-dual-use&quot;)</code></pre>
<p>or assuming you have this file in the directory <code>switzerland-dual-use</code> and your file structure is as described above, you can use RStudio’s menu. Click on <code>Session</code>, then on <code>Set Working Directory</code> and specify the path including <code>switzerland-dual-use</code>.</p>
<p>To read Excel data into R, we need a special R package called <code>readxl</code>. To install the package run the following line in the Console window of RStudio:</p>
<pre class="r"><code>install.packages(&quot;readxl&quot;)</code></pre>
<p>To load the package, so you can access the functions, run the following in the Console window:</p>
<pre class="r"><code>library(&quot;readxl&quot;) </code></pre>
<p>Now we can read in the data from the four quarters of 2016:</p>
<pre class="r"><code>elic_2016_q1_raw &lt;- read_excel(path = &quot;data_raw/1_Quartal_2016_Bewilligungen.xlsx&quot;)
elic_2016_q2_raw &lt;- read_excel(path = &quot;data_raw/2. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx&quot;)
elic_2016_q3_raw &lt;- read_excel(path = &quot;data_raw/3. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx&quot;)
elic_2016_q4_raw &lt;- read_excel(path = &quot;data_raw/4. Quartal 2016 Erteilte Ausfuhrbewilligungen.xlsx&quot;)</code></pre>
</div>
<div id="section-verify" class="section level2">
<h2>Verify</h2>
<p>To check whether reading in the files worked and the data are as we wanted, there are a couple of useful commands in R. Let’s now first work with <code>elic_2016_q1_raw</code>:</p>
<ul>
<li><code>names()</code> shows the column names of the data frame</li>
</ul>
<pre class="r"><code>names(elic_2016_q1_raw)</code></pre>
<pre><code>## [1] &quot;Geschäftsnummer&quot;            &quot;Bestimmungsland&quot;           
## [3] &quot;Güterart&quot;                   &quot;Geschäftstyp&quot;              
## [5] &quot;Richtung&quot;                   &quot;Exportkontrollnummer [EKN]&quot;
## [7] &quot;Wert [CHF]&quot;</code></pre>
<ul>
<li><code>head()</code> shows the first few rows of the data frame</li>
</ul>
<pre class="r"><code>head(elic_2016_q1_raw)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Geschäftsnummer"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Bestimmungsland"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Güterart"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Geschäftstyp"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Richtung"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Exportkontrollnummer [EKN]"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Wert [CHF]"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"8007724","2":"Ägypten","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"2B350.i","7":"38330"},{"1":"8007844","2":"Ägypten","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5A002.a1","7":"4546"},{"1":"8007844","2":"Ägypten","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5A002.a1","7":"122287"},{"1":"8007844","2":"Ägypten","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5D002.c1","7":"5000"},{"1":"8006915","2":"Ägypten","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"2B350.i","7":"132777"},{"1":"8006792","2":"Ägypten","3":"National kontrollierte Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5.1","7":"453"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li><code>tail()</code> shows the last few rows of the data frame</li>
</ul>
<pre class="r"><code>tail(elic_2016_q1_raw)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Geschäftsnummer"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Bestimmungsland"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Güterart"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Geschäftstyp"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Richtung"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Exportkontrollnummer [EKN]"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Wert [CHF]"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"8007295","2":"Vietnam","3":"Besondere militärische Güter\\r\\nBesondere militärische Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"ML13\\r\\nML22","7":"5000000"},{"1":"8006715","2":"Vietnam","3":"Nukleargüter","4":"Einzelbewilligung","5":"Ausfuhr","6":"0C003","7":"2000"},{"1":"8006715","2":"Vietnam","3":"Nukleargüter","4":"Einzelbewilligung","5":"Ausfuhr","6":"0C003","7":"18000"},{"1":"8006361","2":"Vietnam","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5D001.a","7":"16320"},{"1":"8006361","2":"Vietnam","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5A001.f1","7":"10030"},{"1":"8006361","2":"Vietnam","3":"Dual Use Güter","4":"Einzelbewilligung","5":"Ausfuhr","6":"5D001.a","7":"8330"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<ul>
<li><code>summary()</code> shows a summary of the data. For numeric variables such as the price (<code>Wert [CHF]</code>) this function shows the <a href="https://en.wikipedia.org/wiki/Five-number_summary">five number summary</a> and the mean (average). For character variables such as receiving country (<code>Bestimmungsland</code>) the function shows the variable’s length and informs that it is of the character class and mode.</li>
</ul>
<pre class="r"><code>summary(elic_2016_q1_raw)</code></pre>
<pre><code>##  Geschäftsnummer   Bestimmungsland      Güterart        
##  Min.   :8000360   Length:943         Length:943        
##  1st Qu.:8006747   Class :character   Class :character  
##  Median :8007211   Mode  :character   Mode  :character  
##  Mean   :8007158                                        
##  3rd Qu.:8007748                                        
##  Max.   :8008218                                        
##  Geschäftstyp         Richtung         Exportkontrollnummer [EKN]
##  Length:943         Length:943         Length:943                
##  Class :character   Class :character   Class :character          
##  Mode  :character   Mode  :character   Mode  :character          
##                                                                  
##                                                                  
##                                                                  
##    Wert [CHF]       
##  Min.   :        0  
##  1st Qu.:     1620  
##  Median :    10500  
##  Mean   :   422685  
##  3rd Qu.:   129224  
##  Max.   :120000000</code></pre>
<ul>
<li><code>str()</code> shows the type of each variable (here <code>num</code> for numeric and <code>chr</code> for character) and the first few values</li>
</ul>
<pre class="r"><code>str(elic_2016_q1_raw)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    943 obs. of  7 variables:
##  $ Geschäftsnummer           : num  8007724 8007844 8007844 8007844 8006915 ...
##  $ Bestimmungsland           : chr  &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; ...
##  $ Güterart                  : chr  &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; ...
##  $ Geschäftstyp              : chr  &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; ...
##  $ Richtung                  : chr  &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; ...
##  $ Exportkontrollnummer [EKN]: chr  &quot;2B350.i&quot; &quot;5A002.a1&quot; &quot;5A002.a1&quot; &quot;5D002.c1&quot; ...
##  $ Wert [CHF]                : num  38330 4546 122287 5000 132777 ...</code></pre>
</div>
<div id="section-clean" class="section level2">
<h2>Clean</h2>
<p>In this section we will need the <code>dplyr</code> package</p>
<pre class="r"><code>library(&quot;dplyr&quot;)   ## if not available install by typing install.packages(&quot;dplyr&quot;)</code></pre>
<p>As a first step we want to combine the four 2016 data sets. You might have already realised that the first data set has one collumn that is just <code>NA</code>. <code>NA</code> is the missing value indicator in R. So basically this collumn does not contain any information. Let’s see what happens to this collumn if we combine the four data sets using function <code>bind_rows()</code>. <code>bind_rows()</code> keeps all collumns in all data sets and fills a column with <code>NA</code> when a data set does not contain the column. Also it created a new collumn called<code>Quartal</code>. It did that because we told it that the <code>.id</code> collumn is <code>Quartal</code> and the values for each <code>Quartal</code> are given in the quotation marks <code>&quot;</code>.</p>
<pre class="r"><code>names(elic_2016_q1_raw)</code></pre>
<pre><code>## [1] &quot;Geschäftsnummer&quot;            &quot;Bestimmungsland&quot;           
## [3] &quot;Güterart&quot;                   &quot;Geschäftstyp&quot;              
## [5] &quot;Richtung&quot;                   &quot;Exportkontrollnummer [EKN]&quot;
## [7] &quot;Wert [CHF]&quot;</code></pre>
<pre class="r"><code>names(elic_2016_q2_raw)</code></pre>
<pre><code>## [1] &quot;Geschäftsnummer&quot;            &quot;Bestimmungsland&quot;           
## [3] &quot;Güterart&quot;                   &quot;Geschäftstyp&quot;              
## [5] &quot;Richtung&quot;                   &quot;Exportkontrollnummer [EKN]&quot;
## [7] &quot;Wert [CHF]&quot;</code></pre>
<pre class="r"><code>elic_2016_1 &lt;- bind_rows(&quot;16/01&quot; = elic_2016_q1_raw, 
                         &quot;16/02&quot; = elic_2016_q2_raw, 
                         &quot;16/03&quot; = elic_2016_q3_raw, 
                         &quot;16/04&quot; = elic_2016_q4_raw, 
                         .id = &quot;Quartal&quot;)

names(elic_2016_1)</code></pre>
<pre><code>## [1] &quot;Quartal&quot;                    &quot;Geschäftsnummer&quot;           
## [3] &quot;Bestimmungsland&quot;            &quot;Güterart&quot;                  
## [5] &quot;Geschäftstyp&quot;               &quot;Richtung&quot;                  
## [7] &quot;Exportkontrollnummer [EKN]&quot; &quot;Wert [CHF]&quot;</code></pre>
<pre class="r"><code>str(elic_2016_1)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3083 obs. of  8 variables:
##  $ Quartal                   : chr  &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; ...
##  $ Geschäftsnummer           : num  8007724 8007844 8007844 8007844 8006915 ...
##  $ Bestimmungsland           : chr  &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; ...
##  $ Güterart                  : chr  &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; ...
##  $ Geschäftstyp              : chr  &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; &quot;Einzelbewilligung&quot; ...
##  $ Richtung                  : chr  &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; ...
##  $ Exportkontrollnummer [EKN]: chr  &quot;2B350.i&quot; &quot;5A002.a1&quot; &quot;5A002.a1&quot; &quot;5D002.c1&quot; ...
##  $ Wert [CHF]                : num  38330 4546 122287 5000 132777 ...</code></pre>
<div class="tutorial-exercise-support" data-label="prepare-clean1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>load(url(&quot;https://github.com/pbpearman/r-consortium-proposal/raw/interactive/material/lessons/switzerland-dual-use/data_clean/elic_2016_1.RData&quot;))</code></pre>
</div>
<div id="section-exercise" class="section level3">
<h3>Exercise</h3>
Use head() with the n= option to get the first 10 rows of elic_2016_1
<div class="tutorial-exercise" data-label="check_values" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-clean1","exercise.checker":"NULL"}</script>
</div>
<p>Now we do not want to keep the collumn with just <code>NA</code> values and we want to rename a few variables. We can do this with function <code>select()</code>:</p>
<ul>
<li>To just select a variable, name it (e.g. <code>Quartal</code>)</li>
<li>To select and rename a variable, put <code>newname = oldname</code> (e.g. <code>GN = Geschäftsnummer</code>)</li>
<li>For variables with spaces or special symbols, use a single back-quote to show where it starts and ends (see e.g. <code>Wert [CHF]</code>)</li>
<li>To select all except one variable, use the minus symbol (e.g. <code>select(.data = elic_2016_3, -Art)</code> below)</li>
</ul>
<pre class="r"><code>elic_2016_2 &lt;- select(.data = elic_2016_1,
                      GN = Geschäftsnummer, 
                      Quartal, 
                      Land = Bestimmungsland, 
                      Wert = `Wert [CHF]`, 
                      Typ = Güterart, 
                      Signatur = `Exportkontrollnummer [EKN]`, 
                      Art = Richtung)
str(elic_2016_2)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3083 obs. of  7 variables:
##  $ GN      : num  8007724 8007844 8007844 8007844 8006915 ...
##  $ Quartal : chr  &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; ...
##  $ Land    : chr  &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; ...
##  $ Wert    : num  38330 4546 122287 5000 132777 ...
##  $ Typ     : chr  &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; ...
##  $ Signatur: chr  &quot;2B350.i&quot; &quot;5A002.a1&quot; &quot;5A002.a1&quot; &quot;5D002.c1&quot; ...
##  $ Art     : chr  &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; ...</code></pre>
</div>
<div id="section-exercise-1" class="section level3">
<h3>Exercise</h3>
<p>We are only interested in exports (variable <code>Art</code>, value <code>&quot;Ausfuhr&quot;</code>), so we use <code>filter()</code> to select the rows in the data set where this is the case. Before that we check how many rows contain other values. <code>elic_2016_2$Art</code> gives us the variable we are interested in and function <code>table()</code> creates a table for the frequencies of the different values. Use table() to obtain the values of elic_2016_2$Art .</p>
<div class="tutorial-exercise-support" data-label="prepare-clean2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>load(url(&quot;https://github.com/pbpearman/r-consortium-proposal/raw/interactive/material/lessons/switzerland-dual-use/data_clean/elic_2016_2.RData&quot;))</code></pre>
</div>
<div class="tutorial-exercise" data-label="clean2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-clean2","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="clean2-hint" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>&quot;provide the full variable name,i.e. dataframe$variable, as an argument to table()&quot;</code></pre>
</div>
<p>The data set after using <code>filter()</code> should have 3062 rows.</p>
<pre class="r"><code>elic_2016_3 &lt;- filter(.data = elic_2016_2, Art == &quot;Ausfuhr&quot;)
str(elic_2016_3)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3062 obs. of  7 variables:
##  $ GN      : num  8007724 8007844 8007844 8007844 8006915 ...
##  $ Quartal : chr  &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; &quot;16/01&quot; ...
##  $ Land    : chr  &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; &quot;Ägypten&quot; ...
##  $ Wert    : num  38330 4546 122287 5000 132777 ...
##  $ Typ     : chr  &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; &quot;Dual Use Güter&quot; ...
##  $ Signatur: chr  &quot;2B350.i&quot; &quot;5A002.a1&quot; &quot;5A002.a1&quot; &quot;5D002.c1&quot; ...
##  $ Art     : chr  &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; &quot;Ausfuhr&quot; ...</code></pre>
</div>
<div id="section-exercise-2" class="section level3">
<h3>Exercise</h3>
<p>Now the collumn <code>Art</code> is not needed anymore. Let’s remove it from the data set and asign the new data set to the name elic_2016_4. Use select(), specifying the elic_2016_3 data frame and the variable as -Art. Then use str() to look at the new elic_2016_4 object.</p>
<div class="tutorial-exercise-support" data-label="prepare-clean3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>  load(url(&quot;https://github.com/pbpearman/r-consortium-proposal/raw/interactive/material/lessons/switzerland-dual-use/data_clean/elic_2016_3.RData&quot;))</code></pre>
</div>
<div class="tutorial-exercise" data-label="clean3" data-caption="Code" data-completion="0" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-clean3","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="clean3-solution" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>elic_2016_4 &lt;- select(.data = elic_2016_3, -Art); str(elic_2016_4)</code></pre>
</div>
<p>Let’s see what the types of goods are in the dataset.</p>
<pre class="r"><code>unique(elic_2016_4$Typ)</code></pre>
<pre><code>##  [1] &quot;Dual Use Güter&quot;                                              
##  [2] &quot;National kontrollierte Güter&quot;                                
##  [3] &quot;Nukleargüter&quot;                                                
##  [4] &quot;Besondere militärische Güter&quot;                                
##  [5] &quot;Chemikalien CWÜ&quot;                                             
##  [6] &quot;Dual Use Güter\r\nDual Use Güter&quot;                            
##  [7] &quot;Chemikalien CWÜ\r\nDual Use Güter&quot;                           
##  [8] &quot;Besondere militärische Güter\r\nBesondere militärische Güter&quot;
##  [9] &quot;Sanktionsgüter&quot;                                              
## [10] &quot;Chemikalien CWÜ\r\nBesondere militärische Güter&quot;             
## [11] &quot;Dual Use Güter\r\nChemikalien CWÜ&quot;</code></pre>
<p>In the output above, it looks like the variable <code>Typ</code> needs a bit of cleaning because some values are clearly variants that can be set to the simpler version. We can do that by writing a function.</p>
<pre class="r"><code># Here are two &#39;vectors&#39;, the first with the original values and the second with the replacement values

typ_from &lt;- c(&quot;Chemikalien CWÜ&quot;,
              &quot;Dual Use Güter\r\nDual Use Güter&quot;,
              &quot;Chemikalien CWÜ\r\nDual Use Güter&quot;,
              &quot;Besondere militärische Güter\r\nBesondere militärische Güter&quot;,
              &quot;Chemikalien CWÜ\r\nBesondere militärische Güter&quot;,
              &quot;Dual Use Güter\r\nChemikalien CWÜ&quot;)
typ_to &lt;- c(&quot;Chemikalien&quot;,
            &quot;Dual Use Güter&quot;,
            &quot;Chemikalien&quot;,
            &quot;Besondere militärische Güter&quot;,
            &quot;Chemikalien&quot;,
            &quot;Dual Use Güter&quot;)</code></pre>
<p>The function, below, has three arguments: <code>x</code> - the name of the column in the data set where the values are found, <code>from</code> - the vector of original values, <code>to</code> - the vector of replacement values. It contains a for-loop that updates the value of <code>i</code> to proceed through each value in ‘from’, identifying where in column <code>x</code> the value occurs, and replacing those values with the corresponding new value in <code>to</code>. The following lines define the function:</p>
<pre class="r"><code>change_charval &lt;- function(x, from, to) {
  
  for(i in 1:length(from)) {
    x[x == from[i]] &lt;- to[i]
  }
  
  return(x)
}

# Now we will call (i.e., run) the function.  We&#39;ll assign the cleaned-up values to a new variable, &#39;Typ&#39;, which is not in the data set.
Typ &lt;- change_charval(x = elic_2016_4$Typ, from = typ_from, to = typ_to)

# Now we&#39;ll create a new column named &#39;Typ_raw&#39; to hold the original values.
elic_2016_4$Typ_raw &lt;- elic_2016_4$Typ

# Next we assign the cleaned-up values in &#39;Typ&#39; to the data set column with the same name, effectively over-writing the original values.
elic_2016_4$Typ &lt;- Typ</code></pre>
</div>
<div id="section-exercise-3" class="section level3">
<h3>Exercise</h3>
<p>Use one of the R functions we used just above to check that the new values in elic_2016_4$Typ are as you expect.</p>
<div class="tutorial-exercise-support" data-label="prepare-check1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>load(url(&quot;https://github.com/pbpearman/r-consortium-proposal/raw/interactive/material/lessons/switzerland-dual-use/data_clean/elic_2016_3.RData&quot;))

elic_2016_4 &lt;- select(.data = elic_2016_3, -Art)

typ_from &lt;- c(&quot;Chemikalien CWÜ&quot;,
              &quot;Dual Use Güter\r\nDual Use Güter&quot;,
              &quot;Chemikalien CWÜ\r\nDual Use Güter&quot;,
              &quot;Besondere militärische Güter\r\nBesondere militärische Güter&quot;,
              &quot;Chemikalien CWÜ\r\nBesondere militärische Güter&quot;,
              &quot;Dual Use Güter\r\nChemikalien CWÜ&quot;)
typ_to &lt;- c(&quot;Chemikalien&quot;,
            &quot;Dual Use Güter&quot;,
            &quot;Chemikalien&quot;,
            &quot;Besondere militärische Güter&quot;,
            &quot;Chemikalien&quot;,
            &quot;Dual Use Güter&quot;)

change_charval &lt;- function(x, from, to) {
  
  for(i in 1:length(from)) {
    x[x == from[i]] &lt;- to[i]
  }
  
  return(x)
}
Typ &lt;- change_charval(x = elic_2016_4$Typ, from = typ_from, to = typ_to)
elic_2016_4$Typ_raw &lt;- elic_2016_4$Typ
elic_2016_4$Typ &lt;- Typ</code></pre>
</div>
<div class="tutorial-exercise" data-label="check1" data-caption="Code" data-completion="0" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-check1","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="check1-hint" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>&quot;Try unique() with the correct argument value&quot;</code></pre>
</div>
</div>
</div>
<div id="section-analyse" class="section level2">
<h2>Analyse</h2>
<p>For this section we’ll produce some nice graphics with package <code>ggplot2</code></p>
<pre class="r"><code>library(&quot;ggplot2&quot;)</code></pre>
<div id="section-a-first-plot" class="section level3">
<h3>A first plot</h3>
<p>Let’s try making a first plot, which shows how often Switzerland has exported to each country. The plus sign below is particular to ggplot and means that an additional graphic element will be specified. When specified in this way, the length of the bars is determined by the number of times that a value occurs in the data. In this case, that means the number of times a country name occurs in the column <code>Land</code> in data set <code>elic_2016_4</code>. This is determined by the ggplot aesthetic function, aes(), when specified as it is below, and a call is made to geom_bar(), which is a geom that makes bar charts.</p>
<pre class="r"><code>ggplot(elic_2016_4, aes(x = Land)) +  
  geom_bar() +   #this specifies the geom for a bar chart                     
  coord_flip()   #this makes the bars horizontal</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="section-order-the-countries-by-export-volume" class="section level3">
<h3>Order the countries by export volume</h3>
<p>The plot above is fine if you want to check the value for a particular country, but it is hard to see trends in the data, for instance the countries that receive the most exports. Let’s sort the destination countries by number of exports they receive.</p>
<p>This will take a few steps. First we group the rows by country (‘Land’), using <code>group_by()</code>. Then the function <code>summarize()</code> computes by country the number of exports, here ‘n’, actually the number of rows of entries for each country. Below, <code>group_by()</code> is nested within <code>summarize()</code>, which is allowed in R. Then <code>order()</code> identifies the row order of the data based on the number of rows ‘n’ associated with each country. Then <code>factor()</code> helps us define the order in which the country levels should be plotted. <code>ggplot()</code> automatically understands that it should plot the countries in the order in which they are specified as factor levels.</p>
<pre class="r"><code># This code groups elic_2016_4 by the variable country (&#39;Land&#39;), then uses summarise() to find the number of rows (the entries, i.e. exports) for each country. It assigns these values to the variable &#39;n&#39;. 
n_land &lt;- summarise(group_by(elic_2016_4, Land), n = NROW(Land))
head(n_land)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Land"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Ägypten","2":"24"},{"1":"Algerien","2":"9"},{"1":"Argentinien","2":"4"},{"1":"Armenien","2":"13"},{"1":"Aserbaidschan","2":"4"},{"1":"Australien","2":"7"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code># The function order() then gets the order in terms of the value of &#39;n&#39;, and provides an ascending index of the resulting row order
ord &lt;- order(n_land$n)
str(ord)  # the row position of each country, in ascending order by the magnitude of n </code></pre>
<pre><code>##  int [1:107] 7 12 23 32 34 50 54 58 75 94 ...</code></pre>
<pre class="r"><code>ordered_land &lt;- n_land$Land[ord] # impose the sorted order and store in a variable
head(ordered_land)  #the first six values</code></pre>
<pre><code>## [1] &quot;Bahamas&quot;                 &quot;Benin&quot;                  
## [3] &quot;Dominikanische Republik&quot; &quot;Griechenland&quot;           
## [5] &quot;Guatemala&quot;               &quot;Kirgisistan&quot;</code></pre>
<pre class="r"><code>tail(ordered_land)  #the last six values</code></pre>
<pre><code>## [1] &quot;Vereinigte Arabische Emirate&quot; &quot;Iran&quot;                        
## [3] &quot;Russische Föderation&quot;         &quot;Indien&quot;                      
## [5] &quot;Deutschland&quot;                  &quot;China, Volksrepublik&quot;</code></pre>
<pre class="r"><code># Now we convert the column &#39;Land&#39; to the factor variable type, and set the order of the levels (i.e. values) by specifying the ordered vector of country names &#39;ordered_land&#39;.  This does not change the row order of the data set, but makes the data print and plot in this order when this factor variable is used.
elic_2016_4$Land &lt;- factor(elic_2016_4$Land, levels = ordered_land)
str(elic_2016_4$Land)</code></pre>
<pre><code>##  Factor w/ 107 levels &quot;Bahamas&quot;,&quot;Benin&quot;,..: 76 76 76 76 76 76 76 76 76 54 ...</code></pre>
</div>
<div id="section-plot-the-countries-in-order-of-export-volume" class="section level3">
<h3>Plot the countries in order of export volume</h3>
<p>The next plot makes another horizontal bar chart in which the order of the countries is determined by the factor level we specified above. So the bar length and the country order both depend on the number of rows associated with each country, the first because ggplot counts the number of rows, the second because elic_2016_4$Land is now an ordered factor.</p>
<pre class="r"><code>ggplot(elic_2016_4, aes(x = Land)) + 
  geom_bar() +
  coord_flip()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="section-plot-countries-in-order-of-export-value" class="section level3">
<h3>Plot countries in order of export value</h3>
<p>The following plot shows the worth of the goods that were exported to each country. Again we want to sort the countries in a specific order, but this time the value we use to sort the data is the sum of the monitary value (the variable <code>Wert</code>) of exports to each country. So we re-order the countries based on the summed export value, and assign this order in the <code>levels =</code> specification of the call to the function factor(). By using the sorted country names in the argument <code>levels</code> argument of factor(), whenever a plot displays the levels, they are displayed in this order.</p>
<pre class="r"><code>wert_land &lt;- summarise(group_by(elic_2016_4, Land), sum = sum(Wert))
# the re-ordering and assignment to a variable are here done in one line
ordered_land &lt;- wert_land$Land[order(wert_land$sum)] 
# then the levels of the factor are assigned
elic_2016_4$Land &lt;- factor(elic_2016_4$Land, levels = ordered_land)</code></pre>
<p>The plot below is similar to the previous one, but by writing <code>stat = &quot;identity&quot;</code>, the total value of <code>Wert</code> is plotted for each country, and these are displayed in the order of magnitude of value, which we just specified above. When you want to show bars that represent pre-calculated values, using <code>stat = &quot;identity&quot;</code> is the way to go.</p>
<pre class="r"><code>ggplot(elic_2016_4, aes(x = Land, y = Wert, fill = Typ)) + 
  geom_bar(stat = &quot;identity&quot;) +
  coord_flip()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-25-1.png" width="672" /></p>
<p>But wait, why are there countries listed, that do not seem to have gotten anything from switzerland? Let’s look at those:</p>
<pre class="r"><code>library(&#39;knitr&#39;) # kable() in this package will make nice tables

novalue  &lt;- filter(.data = elic_2016_4, Wert == 0) # get only the lines with zero value
kable(summarize(group_by(.data=novalue,Land,Typ),n=n()),format = &quot;html&quot;,caption = &quot;Number Exports without Declared Value&quot;)</code></pre>
<table>
<caption>
Number Exports without Declared Value
</caption>
<thead>
<tr>
<th style="text-align:left;">
Land
</th>
<th style="text-align:left;">
Typ
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Portugal
</td>
<td style="text-align:left;">
Besondere militärische Güter
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Niederlande
</td>
<td style="text-align:left;">
Chemikalien
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
Iran
</td>
<td style="text-align:left;">
Sanktionsgüter
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Vereinigte Arabische Emirate
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Frankreich
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Malaysia
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Deutschland
</td>
<td style="text-align:left;">
Besondere militärische Güter
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Deutschland
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Grossbritannien
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
China, Volksrepublik
</td>
<td style="text-align:left;">
Dual Use Güter
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
<p>What do you think could be the potential reasons for these missing declared values? If you are a data journalist, you may have just found something for further research.</p>
</div>
<div id="section-countries-receiving-the-highest-value-of-exports" class="section level3">
<h3>Countries receiving the highest value of exports</h3>
<p>Let’s look at the 10 countries that had the highest value exports in the data set.</p>
<pre class="r"><code>elic_2016_value &lt;- filter(.data = elic_2016_4, Wert &gt; 0)
elic_2016_value$Land &lt;- droplevels(elic_2016_value$Land)</code></pre>
<pre class="r"><code>elic_2016_4$Land2 &lt;- elic_2016_4$Land
highest10 &lt;- tail(levels(elic_2016_4$Land), 10)</code></pre>
<p>In the following code, all the countries that aren’t in the group of 10 will be pooled into “Other countries” by specifying for them just a single factor level, “Other countries”. This is done by constructing an expression that returns TRUE for the levels of elic_2016_4$Land2 (i.e., the countries) that are in highest10, using %in%, then negating it with ‘!’, the negation operator, thus specifying the countries not in hightest10.</p>
<pre class="r"><code>head(levels(elic_2016_4$Land2) %in% highest10)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<pre class="r"><code>head(!levels(elic_2016_4$Land2) %in% highest10)</code></pre>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<pre class="r"><code>levels(elic_2016_4$Land2)[!(levels(elic_2016_4$Land2) %in% highest10)] &lt;- &quot;Other countries&quot;</code></pre>
<pre class="r"><code>wert_typ &lt;- summarise(group_by(elic_2016_4, Typ), sum = sum(Wert))
ordered_typ &lt;- wert_typ$Typ[order(wert_typ$sum)]
elic_2016_4$Typ &lt;- factor(elic_2016_4$Typ, levels = rev(ordered_typ))</code></pre>
<pre class="r"><code>p_cntry &lt;- ggplot(elic_2016_4, aes(x = Land2, y = Wert, fill = Typ)) + 
  geom_bar(stat = &quot;identity&quot;) +  # so tha values in Wert are used for bar length 
  coord_flip() +  # Remember, we have to flip the plot to get horizontal bars
  xlab(&quot;Land&quot;) # There is a lot of flexibility in the labeling of the plots. Here is a start.
p_cntry</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-31-1.png" width="864" /></p>
</div>
</div>
<div id="section-present" class="section level2">
<h2>Present</h2>
<p>One cool thing about using <code>ggplot2</code> in a newsroom is that you can have different themes (color and font schemes).</p>
<pre class="r"><code>p_cntry + theme_minimal()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-32-1.png" width="624" /></p>
<pre class="r"><code>p_cntry + theme_bw()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-32-2.png" width="624" /></p>
<p>With the <code>ggthemes</code> package you can go even more wild and try themes that are similar to the themes of famous newsrooms…</p>
<pre class="r"><code>library(&quot;ggthemes&quot;)</code></pre>
<p>…such as the Economist,…</p>
<pre class="r"><code>p_cntry + theme_economist() + scale_fill_economist()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-34-1.png" width="864" /></p>
<p>…FiveThirtyEight,…</p>
<pre class="r"><code>my_palette &lt;- c(&quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#009E73&quot;, &quot;#F0E442&quot;, &quot;#0072B2&quot;, &quot;#D55E00&quot;)
p_cntry + theme_fivethirtyeight() + scale_fill_manual(values = my_palette)</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-35-1.png" width="864" /></p>
<p>…or the Wall Street Journal.</p>
<pre class="r"><code>p_cntry + theme_wsj() + scale_fill_wsj()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-36-1.png" width="864" /></p>
<p>And if you want to really badly go back to an ungly 2003 Excel style, you can do that too :)</p>
<pre class="r"><code>p_cntry + theme_excel()</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-37-1.png" width="624" /></p>
<p>Or you take a theme you like and modify it. To create a School of Data themed plot, you can use the following colors and fonts. Gill Sans MT is used because it should work on both Windows and Mac.</p>
<pre class="r"><code>scodablue &lt;- &quot;#00AFF0&quot; 
scodagrey &lt;- &quot;#333333&quot;
scodagrey2 &lt;- &quot;#C9C9C9&quot;
scodacol &lt;- c(scodablue, &quot;#CCCC33&quot;, &quot;#FF358B&quot;, &quot;#59631E&quot;, &quot;#29D9C2&quot;, &quot;#C9C9C9&quot;)
p_cntry + 
  scale_fill_manual(values = scodacol) +
  theme_classic(base_size = 11, base_family = &quot;Gill Sans MT&quot;) +
  theme(axis.text = element_text(family = &quot;Gill Sans MT Bold&quot;, colour = scodagrey),  
        panel.grid.major.x = element_line(color = scodagrey2),
        panel.grid.minor.x = element_line(color = scodagrey2), 
        line = element_line(colour = scodagrey),
        legend.position = &quot;bottom&quot;)</code></pre>
<p><img src="recipe_switzerland-dual-use_files/figure-html4/unnamed-chunk-38-1.png" width="864" /> You can learn more about ggplot <a href="http://r4ds.had.co.nz/data-visualisation.html">here</a>, <a href="http://r4ds.had.co.nz/graphics-for-communication.html">here</a> and <a href="http://ggplot2.tidyverse.org/reference/index.html">here</a>. You can easily find additional reference and instructional material. While ggplot takes some effort to learn, the ample references, on-line guides and cheat-sheets make it so that you don’t have to keep everything in your head.</p>
</div>
<div id="section-summary" class="section level2">
<h2>Summary</h2>
<p>We have been through the complete School of Data pipeline. By taking the data through the pipeline, you have gained experience in some powerful and useful tools for data organization, manipulation and visualization. You can increase your abilities in R by working through the text and questions in <a href="http://r4ds.had.co.nz/">R for Data Science</a>.</p>

<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-check_values-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-check_values-code-editor`)), session)
output$`tutorial-exercise-check_values-output` <- renderUI({
  `tutorial-exercise-check_values-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-clean2-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-clean2-code-editor`)), session)
output$`tutorial-exercise-clean2-output` <- renderUI({
  `tutorial-exercise-clean2-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-clean3-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-clean3-code-editor`)), session)
output$`tutorial-exercise-clean3-output` <- renderUI({
  `tutorial-exercise-clean3-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-check1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-check1-code-editor`)), session)
output$`tutorial-exercise-check1-output` <- renderUI({
  `tutorial-exercise-check1-result`()
})
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery-1.11.3"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap-3.3.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["href"]}},"value":[{"type":"character","attributes":{},"value":["recipe_switzerland-dual-use_files/highlightjs-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery-1.11.3"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["4.5.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/font-awesome-4.5.0"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/font-awesome.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["localforage"]},{"type":"character","attributes":{},"value":["1.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/localforage"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["localforage.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.9.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Recipe for analysis of the dual-use goods exports</h2>
<h4 class="author"><em>Heidi Seibold and Peter B. Pearman</em></h4>
<h4 class="date"><em>April 25, 2017</em></h4>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>

</html>
